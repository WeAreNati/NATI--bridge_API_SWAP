{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Principal = exports.PRINCIPAL_VERSION_CURRENT = exports.PRINCIPAL_VERSION_INVALID = exports.PRINCIPAL_DEFAULT_FLAGS = void 0;\nconst bufferutils_1 = require(\"../utils/bufferutils\");\nconst bn_js_1 = require(\"bn.js\");\nconst varuint_1 = require(\"../utils/varuint\");\nconst KeyID_1 = require(\"./KeyID\");\nconst NoDestination_1 = require(\"./NoDestination\");\nexports.PRINCIPAL_DEFAULT_FLAGS = new bn_js_1.BN(0, 10);\nexports.PRINCIPAL_VERSION_INVALID = new bn_js_1.BN(0, 10);\nexports.PRINCIPAL_VERSION_CURRENT = new bn_js_1.BN(1, 10);\nconst {\n  BufferReader,\n  BufferWriter\n} = bufferutils_1.default;\nclass Principal {\n  constructor(data) {\n    this.flags = exports.PRINCIPAL_DEFAULT_FLAGS;\n    this.version = exports.PRINCIPAL_VERSION_INVALID;\n    if (data != null) {\n      if (data.flags != null) this.flags = data.flags;\n      if (data.version != null) this.version = data.version;\n      if (data.min_sigs != null) this.min_sigs = data.min_sigs;\n      if (data.primary_addresses) this.primary_addresses = data.primary_addresses;\n    }\n  }\n  getSelfByteLength() {\n    let byteLength = 0;\n    byteLength += 4; //uint32 version size\n    byteLength += 4; //uint32 flags size\n    byteLength += varuint_1.default.encodingLength(this.primary_addresses.length);\n    for (const addr of this.primary_addresses) {\n      byteLength += varuint_1.default.encodingLength(addr.getByteLength());\n      byteLength += addr.getByteLength();\n    }\n    byteLength += 4; //uint32 minimum signatures size\n    return byteLength;\n  }\n  getByteLength() {\n    return this.getSelfByteLength();\n  }\n  toBuffer() {\n    const writer = new BufferWriter(Buffer.alloc(this.getSelfByteLength()));\n    writer.writeUInt32(this.version.toNumber());\n    writer.writeUInt32(this.flags.toNumber());\n    writer.writeVector(this.primary_addresses.map(x => x.toBuffer()));\n    writer.writeUInt32(this.min_sigs.toNumber());\n    return writer.buffer;\n  }\n  fromBuffer(buffer, offset = 0) {\n    const reader = new BufferReader(buffer, offset);\n    this.version = new bn_js_1.BN(reader.readUInt32(), 10);\n    this.flags = new bn_js_1.BN(reader.readUInt32(), 10);\n    this.primary_addresses = reader.readVector().map(x => {\n      if (x.length === 20) {\n        return new KeyID_1.KeyID(x);\n      } else if (x.length === 33) {\n        //TODO: Implement pubkey principal by adding PubKey class as possible TxDestination\n        throw new Error(\"Pubkey Principal not yet supported\");\n      } else {\n        return new NoDestination_1.NoDestination();\n      }\n    });\n    this.min_sigs = new bn_js_1.BN(reader.readUInt32(), 10);\n    return reader.offset;\n  }\n}\nexports.Principal = Principal;","map":{"version":3,"names":["Object","defineProperty","exports","value","Principal","PRINCIPAL_VERSION_CURRENT","PRINCIPAL_VERSION_INVALID","PRINCIPAL_DEFAULT_FLAGS","bufferutils_1","require","bn_js_1","varuint_1","KeyID_1","NoDestination_1","BN","BufferReader","BufferWriter","default","constructor","data","flags","version","min_sigs","primary_addresses","getSelfByteLength","byteLength","encodingLength","length","addr","getByteLength","toBuffer","writer","Buffer","alloc","writeUInt32","toNumber","writeVector","map","x","buffer","fromBuffer","offset","reader","readUInt32","readVector","KeyID","Error","NoDestination"],"sources":["/Users/oddfl3x/Code/bridge2/NATI<>bridge_API_SWAP/node_modules/verus-typescript-primitives/dist/pbaas/Principal.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Principal = exports.PRINCIPAL_VERSION_CURRENT = exports.PRINCIPAL_VERSION_INVALID = exports.PRINCIPAL_DEFAULT_FLAGS = void 0;\nconst bufferutils_1 = require(\"../utils/bufferutils\");\nconst bn_js_1 = require(\"bn.js\");\nconst varuint_1 = require(\"../utils/varuint\");\nconst KeyID_1 = require(\"./KeyID\");\nconst NoDestination_1 = require(\"./NoDestination\");\nexports.PRINCIPAL_DEFAULT_FLAGS = new bn_js_1.BN(0, 10);\nexports.PRINCIPAL_VERSION_INVALID = new bn_js_1.BN(0, 10);\nexports.PRINCIPAL_VERSION_CURRENT = new bn_js_1.BN(1, 10);\nconst { BufferReader, BufferWriter } = bufferutils_1.default;\nclass Principal {\n    constructor(data) {\n        this.flags = exports.PRINCIPAL_DEFAULT_FLAGS;\n        this.version = exports.PRINCIPAL_VERSION_INVALID;\n        if (data != null) {\n            if (data.flags != null)\n                this.flags = data.flags;\n            if (data.version != null)\n                this.version = data.version;\n            if (data.min_sigs != null)\n                this.min_sigs = data.min_sigs;\n            if (data.primary_addresses)\n                this.primary_addresses = data.primary_addresses;\n        }\n    }\n    getSelfByteLength() {\n        let byteLength = 0;\n        byteLength += 4; //uint32 version size\n        byteLength += 4; //uint32 flags size\n        byteLength += varuint_1.default.encodingLength(this.primary_addresses.length);\n        for (const addr of this.primary_addresses) {\n            byteLength += varuint_1.default.encodingLength(addr.getByteLength());\n            byteLength += addr.getByteLength();\n        }\n        byteLength += 4; //uint32 minimum signatures size\n        return byteLength;\n    }\n    getByteLength() {\n        return this.getSelfByteLength();\n    }\n    toBuffer() {\n        const writer = new BufferWriter(Buffer.alloc(this.getSelfByteLength()));\n        writer.writeUInt32(this.version.toNumber());\n        writer.writeUInt32(this.flags.toNumber());\n        writer.writeVector(this.primary_addresses.map(x => x.toBuffer()));\n        writer.writeUInt32(this.min_sigs.toNumber());\n        return writer.buffer;\n    }\n    fromBuffer(buffer, offset = 0) {\n        const reader = new BufferReader(buffer, offset);\n        this.version = new bn_js_1.BN(reader.readUInt32(), 10);\n        this.flags = new bn_js_1.BN(reader.readUInt32(), 10);\n        this.primary_addresses = reader.readVector().map(x => {\n            if (x.length === 20) {\n                return new KeyID_1.KeyID(x);\n            }\n            else if (x.length === 33) {\n                //TODO: Implement pubkey principal by adding PubKey class as possible TxDestination\n                throw new Error(\"Pubkey Principal not yet supported\");\n            }\n            else {\n                return new NoDestination_1.NoDestination();\n            }\n        });\n        this.min_sigs = new bn_js_1.BN(reader.readUInt32(), 10);\n        return reader.offset;\n    }\n}\nexports.Principal = Principal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}
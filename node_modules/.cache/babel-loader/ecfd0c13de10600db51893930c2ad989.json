{"ast":null,"code":"// OP_0 [signatures ...]\nvar bscript = require('../../script');\nvar typeforce = require('typeforce');\nvar OPS = require('bitcoin-ops');\nvar SmartTransactionSignatures = require('../../smart_transaction_signatures');\nfunction partialSignature(value) {\n  return value === OPS.OP_0 || bscript.isCanonicalSignature(value);\n}\nfunction check(script) {\n  var chunks = bscript.decompile(script);\n  if (chunks.length !== 1) return false;\n  return SmartTransactionSignatures.fromChunk(chunks[0]).isValid();\n}\ncheck.toJSON = function () {\n  return 'smart transaction input';\n};\nfunction encodeStack(signature) {\n  var smartTxSigs = SmartTransactionSignatures.fromChunk(signature);\n  if (smartTxSigs.error == null) return [signature];else throw smartTxSigs.error;\n}\nfunction encode(signatures, scriptPubKey) {\n  return bscript.compile(encodeStack(signatures, scriptPubKey));\n}\nfunction decodeStack(stack, allowIncomplete) {\n  typeforce(check, stack, allowIncomplete);\n  return stack.slice(1);\n}\nfunction decode(buffer, allowIncomplete) {\n  var stack = bscript.decompile(buffer);\n  return decodeStack(stack, allowIncomplete);\n}\nmodule.exports = {\n  check: check,\n  decode: decode,\n  decodeStack: decodeStack,\n  encode: encode,\n  encodeStack: encodeStack,\n  partialSignature: partialSignature\n};","map":{"version":3,"names":["bscript","require","typeforce","OPS","SmartTransactionSignatures","partialSignature","value","OP_0","isCanonicalSignature","check","script","chunks","decompile","length","fromChunk","isValid","toJSON","encodeStack","signature","smartTxSigs","error","encode","signatures","scriptPubKey","compile","decodeStack","stack","allowIncomplete","slice","decode","buffer","module","exports"],"sources":["/Users/oddfl3x/Code/bridge2/NATI<>bridge_API_SWAP/node_modules/@bitgo/utxo-lib/dist/src/templates/smarttransaction/input.js"],"sourcesContent":["// OP_0 [signatures ...]\nvar bscript = require('../../script');\nvar typeforce = require('typeforce');\nvar OPS = require('bitcoin-ops');\nvar SmartTransactionSignatures = require('../../smart_transaction_signatures');\nfunction partialSignature(value) {\n    return value === OPS.OP_0 || bscript.isCanonicalSignature(value);\n}\nfunction check(script) {\n    var chunks = bscript.decompile(script);\n    if (chunks.length !== 1)\n        return false;\n    return SmartTransactionSignatures.fromChunk(chunks[0]).isValid();\n}\ncheck.toJSON = function () { return 'smart transaction input'; };\nfunction encodeStack(signature) {\n    var smartTxSigs = SmartTransactionSignatures.fromChunk(signature);\n    if (smartTxSigs.error == null)\n        return [signature];\n    else\n        throw smartTxSigs.error;\n}\nfunction encode(signatures, scriptPubKey) {\n    return bscript.compile(encodeStack(signatures, scriptPubKey));\n}\nfunction decodeStack(stack, allowIncomplete) {\n    typeforce(check, stack, allowIncomplete);\n    return stack.slice(1);\n}\nfunction decode(buffer, allowIncomplete) {\n    var stack = bscript.decompile(buffer);\n    return decodeStack(stack, allowIncomplete);\n}\nmodule.exports = {\n    check: check,\n    decode: decode,\n    decodeStack: decodeStack,\n    encode: encode,\n    encodeStack: encodeStack,\n    partialSignature: partialSignature\n};\n"],"mappings":"AAAA;AACA,IAAIA,OAAO,GAAGC,OAAO,CAAC,cAAc,CAAC;AACrC,IAAIC,SAAS,GAAGD,OAAO,CAAC,WAAW,CAAC;AACpC,IAAIE,GAAG,GAAGF,OAAO,CAAC,aAAa,CAAC;AAChC,IAAIG,0BAA0B,GAAGH,OAAO,CAAC,oCAAoC,CAAC;AAC9E,SAASI,gBAAgBA,CAACC,KAAK,EAAE;EAC7B,OAAOA,KAAK,KAAKH,GAAG,CAACI,IAAI,IAAIP,OAAO,CAACQ,oBAAoB,CAACF,KAAK,CAAC;AACpE;AACA,SAASG,KAAKA,CAACC,MAAM,EAAE;EACnB,IAAIC,MAAM,GAAGX,OAAO,CAACY,SAAS,CAACF,MAAM,CAAC;EACtC,IAAIC,MAAM,CAACE,MAAM,KAAK,CAAC,EACnB,OAAO,KAAK;EAChB,OAAOT,0BAA0B,CAACU,SAAS,CAACH,MAAM,CAAC,CAAC,CAAC,CAAC,CAACI,OAAO,CAAC,CAAC;AACpE;AACAN,KAAK,CAACO,MAAM,GAAG,YAAY;EAAE,OAAO,yBAAyB;AAAE,CAAC;AAChE,SAASC,WAAWA,CAACC,SAAS,EAAE;EAC5B,IAAIC,WAAW,GAAGf,0BAA0B,CAACU,SAAS,CAACI,SAAS,CAAC;EACjE,IAAIC,WAAW,CAACC,KAAK,IAAI,IAAI,EACzB,OAAO,CAACF,SAAS,CAAC,CAAC,KAEnB,MAAMC,WAAW,CAACC,KAAK;AAC/B;AACA,SAASC,MAAMA,CAACC,UAAU,EAAEC,YAAY,EAAE;EACtC,OAAOvB,OAAO,CAACwB,OAAO,CAACP,WAAW,CAACK,UAAU,EAAEC,YAAY,CAAC,CAAC;AACjE;AACA,SAASE,WAAWA,CAACC,KAAK,EAAEC,eAAe,EAAE;EACzCzB,SAAS,CAACO,KAAK,EAAEiB,KAAK,EAAEC,eAAe,CAAC;EACxC,OAAOD,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC;AACzB;AACA,SAASC,MAAMA,CAACC,MAAM,EAAEH,eAAe,EAAE;EACrC,IAAID,KAAK,GAAG1B,OAAO,CAACY,SAAS,CAACkB,MAAM,CAAC;EACrC,OAAOL,WAAW,CAACC,KAAK,EAAEC,eAAe,CAAC;AAC9C;AACAI,MAAM,CAACC,OAAO,GAAG;EACbvB,KAAK,EAAEA,KAAK;EACZoB,MAAM,EAAEA,MAAM;EACdJ,WAAW,EAAEA,WAAW;EACxBJ,MAAM,EAAEA,MAAM;EACdJ,WAAW,EAAEA,WAAW;EACxBZ,gBAAgB,EAAEA;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script"}